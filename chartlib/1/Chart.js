/* Copyright (c) Ericsson 2016 */

define("chartlib/Chart",["jscore/core","chartlib/base/d3"],function(t,e){return t.Widget.extend({View:t.View.extend({getTemplate:function(){return'<div><svg width="100%" height="100%"></svg></div>'}}),onViewReady:function(){if(!this.redraw)throw new Error("redraw() method must be implemented");this.resizeEvent=t.Window.addEventHandler("resize",function(){this.resize()}.bind(this)),this._width=this.options.width,this._height=this.options.height,this.onChartReady(this.options)},onDOMAttach:function(){this._attachedToDOM=!0,this.resize()},onDestroy:function(){t.Window.removeEventHandler(this.resizeEvent)},getD3Element:function(){return this._svg||(this._svg=this.getElement().find("svg")._getHTMLElement()),e.select(this._svg)},getSize:function(){return{width:this.getElement().getProperty("offsetWidth"),height:this.getElement().getProperty("offsetHeight")}},resize:function(t,e){void 0!==t&&(this._width=t),void 0!==e&&(this._height=e),this.getElement().setStyle({width:this._width||"100%",height:this._height||"100%"});var i=this.getSize(),h=this._previousSize;h&&h.width===i.width&&h.height===i.height||!this._attachedToDOM||(this.redraw(),this._previousSize=i)},onChartReady:function(){}})});